<nit-advanced-searchbox
        ng-model="searchParams"
        parameters="availableSearchParams"
        placeholder="Search..."
        template-url="'common/components/device-list/search.html'"
        parameters-display-limit="200">
</nit-advanced-searchbox>
<uib-tabset active="activeTab">
    <uib-tab select="setActive(tabs[0])">
        <uib-tab-heading>
            <i class="glyphicon glyphicon-list"></i>List
        </uib-tab-heading>
        <div ng-if="tabs[0].isActive">
            <div

                    style="text-align: center"
                    id="selectedMenu"
                    class="ani-show"
            >
                <div id="screener" uib-tooltip="Select some devices first." tooltip-enable="selectedDevices.length == 0">
                    <div ng-show="selectedDevices.length == 0"></div>
            <span
                    uib-tooltip-template="'common/components/device-list/selected-devices.uib-tooltip-template.html'"
                    tooltip-placement="bottom"
                    id="counter"
            >
                <span>{{selectedDevices.length}} devices</span>
                <i ng-click="unselectDevices()" class="glyphicon glyphicon-remove-circle"></i>
            </span>
                    <button
                            type="button"
                            class="btn"
                            ng-click="openModal('Label')"
                            ng-class="{'btn-primary': selectedDevices.length > 0}"
                    >
                        <i class="glyphicon glyphicon-tags"></i>Label
                    </button>
                    <manual-events-button devices="selectedDevices"></manual-events-button>
                    <share devices="selectedDevices"></share>
                </div>
            </div>
            <div class="row">
                <div
                        fill-height additional-padding="{{87+20}}"
                        ng-class="{'col-xs-12': _.isEmpty(vewingDevice), 'col-xs-5 col-lg-6': !_.isEmpty(vewingDevice)}">
                    <div>
                        <table id="device-list-table" class="table table-striped table-hover">
                            <thead>
                            <tr>
                                <th></th><th>Id</th><th>Label</th><th>Model</th><th>Last state</th><th>Registered in</th><th>Serial number</th><th></th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr
                                    ng-repeat="device in devices"
                                    ng-click="toggleDeviceView(device)"
                                    ng-class="{success: isSelected(device._id)}"
                                    class="ani-default"
                            >
                                <td>
                                    <input class="device-list-checkbox"
                                           type="checkbox"
                                           checklist-model="selectedDevices"
                                           checklist-value="device"
                                           ng-click="$event.stopPropagation(); select_multiple($event, devices, $index);  broadcastSelection()"
                                    >
                                </td>
                                <td>{{device._id}}</td>
                                <td>{{device.labelId}}</td>
                                <td>{{device.model}}</td>
                                <td></td>
                                <td>{{device._created | date : 'short'}}</td>
                                <td>{{device.serialNumber | limitTo : 10}}{{device.serialNumber.length > 10? '&hellip;' : ''}}</td>
                                <td><device-icon icon="{{device['icon']}}"></device-icon></td>
                            </tr>
                            </tbody>
                            <tr></tr>
                        </table>
                        <div class="text-center" ng-show="!busy && moreData">
                            <button class="btn btn-default" ng-click="getDevices(false,true)">Load more</button>
                        </div>
                    </div>
                </div>
                <device
                        api='deviceApi'
                        class="col-xs-7 col-lg-6 ani-show-no-hide"
                        ng-hide="_.isEmpty(vewingDevice)"
                ></device>
            </div>
        </div>
    </uib-tab>
    <uib-tab select="setActive(tabs[1])">
        <uib-tab-heading>
            <i class="glyphicon glyphicon-map-marker"></i>Map
        </uib-tab-heading>
        <div ng-if="tabs[1].isActive">
            <device-maps devices="devices"></device-maps>
        </div>
    </uib-tab>
</uib-tabset>